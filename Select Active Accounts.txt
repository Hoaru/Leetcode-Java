Description:
A domain name registration service needs new reporting functionality. Create a query that returns a list of all active accounts, the number of unexpired domain names they have, and the nearest expiration date later than July 15, 2022.

The result should have the following columns: username | domains | nearest_expiration.
- username: account username
- domains: total number of domains for a specific account
- nearest_expiration: nearest expiration date for domains for a specific account

The results should be sorted in ascending order by username.


Note:
- Only active accounts should be included in the report
- Only domain names that have not expired (with an expiration date greater than today) should be included in the report.
- Today is July 15, 2022.


Schema:
-----------------------------------------------------------------------
accounts
name	           type	         description
id	             SMALLINT	     unique id, primary key
username	       VARCHAR(255)	
is_active	       SMALLINT	     Account status: 1 = active, 0 = inactive
-----------------------------------------------------------------------
domains
name	           type	         description
account_id	     SMALLINT	     foreign key, acconts.id
name	           VARCHAR(255)	
expiration_date	 VARCHAR(19)
-----------------------------------------------------------------------


Solution:
SELECT 
  a.username, 
  COUNT(d.name) as domains,
  MIN(d.expiration_date) as nearest_expiration
FROM accounts a 
JOIN domains d ON a.id = d.account_id
WHERE a.is_active = 1 
  AND d.expiration_date > '2022-07-15'
GROUP BY a.username
ORDER BY a.username ASC;
